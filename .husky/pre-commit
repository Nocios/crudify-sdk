#!/usr/bin/env sh

# Cargar variables de entorno (archivo simple, sin comandos)
. ~/.zshenv 2>/dev/null

echo "Running pre-commit checks (fast)..."

# 0. Auto-increment version
echo "\n[0/3] Bumping version..."
node scripts/bump-version.cjs || exit 1
git add package.json

# 1. TypeCheck (mas rapido, detecta errores de tipos)
echo "\n[1/3] Type checking..."
pnpm run typecheck || exit 1

# 2. Lint (rapido, detecta problemas de codigo)
echo "\n[2/3] Linting..."
pnpm run lint || exit 1

echo "\nâœ… Pre-commit checks passed!"
echo "Note: Tests, build and sonar will run on pre-push"
